\chapter{Getting started}
\label{gettingstarted}

This chapter provides some useful information for first-time users
of {\em BayesX}: Which versions of BayesX are currently available
(\autoref{availableversions}), how is BayesX installed
(\autoref{installbayesx}), what types of manuals exist
(\autoref{bayesxmanuals}), and how is the graphical user interface
organized (\autoref{bayesxwindows}). Section \ref{generalusage}
describes the general usage of {\em BayesX} and the structure of
{\em BayesX} syntax. The final section contains a description of
three data sets that will be used for demonstrating purposes in
the later chapters.

\section{Available versions of BayesX}
\label{availableversions} \index{GUI version} \index{Command line version} \index{Versions} \index{Versions!GUI}
\index{Versions!Command line}

Currently, {\it BayesX} is available in two different versions. The first one includes a graphical user interface that enables
visualisation of estimated effects. While the computational kernel of {\it BayesX} has been implemented in C++, the graphical
user interface has been implemented in Java.

The second version of {\it BayesX} is a command line version that is based purely on C++ and comes without any graphics
facilities. While the GUI version is provided as a pre-compiled binary with an easy to use installer, the command line
version is provided in terms of source code and has to be compiled on your system. A makefile is provided that assumes that
the GNU C++ compiler is available on your system. Hence, the command line version is suitable for any operating system that
supports the GNU compiler family and has been successfully tested on Windows, Linux and Mac OS. In addition, the cmake toolchain can be used to generate customized makefiles.

As a supplement to both versions, supplementing R packages are available from CRAN (\href{http://www.r-project.org}{http://www.r-project.org}). The package  {\it BayesX} provides functionality for reading, creating and manipulating maps in R as well as some customized visualisation tools. The packages {\it R2BayesX} and {\it BayesR} provide access to {\it BayesX} from within R such that models can be estimated in the usual R formula syntax. Note that not all features described in this manual will be supported by the two latter packages.

The current releases of both {\em BayesX} versions can be downloaded from \href{http://www.bayesx.org}
{http://www.bayesx.org}.

Most of this manual applies for both versions of {\it BayesX}. However, those parts that deal with visualisation of data sets
or estimation results are exclusively for the GUI version.

\section{Installing BayesX}\label{installbayesx}
\index{Installation} \index{Installation directories}

Depending on the version of {\it BayesX} you are planning to use, there are two different ways to install it on your computer.
For the GUI version, you have to download the installation routine from the {\em BayesX} homepage and execute it (with
administrator privileges for Windows Vista). The installation routine will request all necessary information during the
installation process. Note that it is recommended to install BayesX in a directory without spaces in the path name. When {\em
BayesX} has been installed successfully, it can be started using the {\em Windows Start} button or the icon created on the
desktop (depending on your specifications during the installation process).

For the command line version, you have to unpack the zip archive containing the source code of {\it BayesX}. If you have the
make facility available, you can simply type #make BayesX# in the shell and {\it BayesX} will be compiled. Depending on your
operating system, some minor modifications of the make file (for example relating to the version of the GNU compiler you have
installed or the location of the readline library) may be necessary.

After a successful installation, there should be four subdirectories in the installation directors. The #doc# directory
contains the program documentation, i.e. the three {\em BayesX} manuals (see the following subsection). The #examples#
directory contains the three data sets, #credit.raw#, #rents.raw# and #zambia.raw#, which will be used for demonstrating
purposes throughout the manual. A detailed description of these data sets is given in \autoref{datadescription}. The #examples#
directory also contains some tutorial programs that illustrate the usage of {\em BayesX}, see the tutorials manual. The
#output# directory is the default directory for program output stored in files. Of course, the output window can be redefined
by the user, compare \autoref{bayesregglobopt}, \autoref{remlregglobopt} and \autoref{stepwiseregglobopt}. Finally, temporary
files created when estimating regression models will be stored in the #temp# directory. Usually you will never use this
directory.

The subdirectories and their content are briefly summarized in \autoref{dirtable}.

\begin{table}[ht]
\begin{center}
\begin{tabular}{|l|l|}
\hline
Directory & Content \\
\hline
#doc# & the {\em BayesX} manuals \\
#examples# & data set examples and tutorial programs \\
#output# & default directory for estimation output \\
#temp# & temporary files \\
\hline
\end{tabular}
{\em\caption{ \label{dirtable} Subdirectories of the installation directory and their content.}}
\end{center}
\end{table}

\section{Manuals}\label{bayesxmanuals}
\index{Manuals}

{\em BayesX} is shipped with three different manuals. The reference manual (i.e. the manual you are just reading) gives
detailed information on the general usage of BayesX, the syntax of {\em BayesX} commands and the different objects used by {\em
BayesX}. The methodology manual provides background information on the statistical methodology that is implemented in {\em
BayesX}. In this manual, you will also find more references on the methodological background. The tutorial manual is intended
to make new users familiar with the usage of {\em BayesX} by demonstrating examples. It contains three self-contained
tutorials, describing how to perform semiparametric regression analyses using {\em BayesX}. All three manuals can be found in
the #doc# directory (a subdirectory of the installation directory). In the GUI version of {\it BayesX}, the manuals are
also available from the help menu.

\section{Windows and buttons in BayesX}\label{bayesxwindows}
\index{Windows}

This section only applies to the GUI version of {\it BayesX}

After starting {\em BayesX} you will see a main window with a menu bar and four additional subwindows. The four windows are the
{\em command window}, the {\em output window}, the {\em review window} and the {\em object browser}. The purpose of these
windows is described in the following four subsections. Below the menu bar there is a menu bar containing the buttons BREAK,
PAUSE and SUPPRESS OUTPUT, and the priority menu. Their functionality is described in subsection \ref{buttons} and
\ref{prioritymenu}.

\subsection{The command window}
\index{Command window} \index{Windows!Command}

Allmost all {\em BayesX} commands are entered and executed in the {\em command window}. By default, a command will be executed
if you press the return key. You can change this default delimiter using the #delimiter# command, see \autoref{delimiter}.

\subsection{The output window}
\index{Output window} \index{Windows!Output}

In the {\em output window}, all commands entered in the {\em command window} or executed through a batch file (see
\autoref{batch}) are printed together with the program output.

\index{Saving the output} The content of the {\em output window} can be saved and processed with your favorite text editor. For
saving the output, enter the {\em file menu} and click on {\em Save output} or {\em Save output as}. The file save dialog will
allow you to choose between two different file formats. The default is the rich-text format but it is also possible to store
the {\em output window} in plain ASCII format. This, however, has the disadvantage that all text highlights (for example bold
letters) will disappear in the saved file.

The {\em file menu} also allows to clear the {\em output window} (i.e. delete the content of the window) or to open an already
existing file.

Depending on the screen resolution of your computer, letters appearing in the {\em output window} may be very small or too
large. The font size can be varied in the {\em preferences menu}.

\subsection{The review window}
\index{Review window} \index{Windows!Review}

In many cases, subsequent commands change only slightly. The {\em review window} gives you convenient access to the last 100
past commands entered during a session. Double click on one of these past commands and it is automatically copied to the {\em
command window}, where it can be modified and / or executed again.

\subsection{The object browser}
\index{Object browser}

{\em BayesX} is object oriented, i.e. different types of objects are used to store data, estimate regression models, etc. The
{\em object browser} provides an overview of the objects currently defined and about their contents. The {\em object browser}
window is split into two parts. The left part displays the different object types currently supported by {\em BayesX} ({\em
dataset objects}, {\em bayesreg objects}, {\em remlreg objects}, {\em map objects}, {\em dag objects} and {\em graph
objects})s. By clicking on one of the object types, the names of all objects of this type will appear in the right panel of the
{\em object browser}. Double clicking on one of the names gives a visualization of the object and / or a short summary in the
{\em output window}, depending on the object type. Double clicking on {\em dataset objects}, for example, will open a
spreadsheet where the variables and the observations of the data set can be inspected. Clicking on {\em map objects} opens a
window that contains a graphical representation of the map.

\subsection{BREAK, PAUSE and SUPPRESS OUTPUT button}
\label{buttons} \index{PAUSE button} \index{BREAK button}
\index{SUPPRESS OUTPUT button} \index{Buttons} \index{Buttons!PAUSE}
\index{Buttons!BREAK} \index{Buttons!SUPPRESS OUTPUT}

The {\em BayesX} button panel contains the BREAK button, the PAUSE button and the SUPPRESS OUTPUT button. The purpose of the
BREAK button is to interrupt the process that is currently executed (this may take some time). Clicking on the PAUSE button
interrupts the current process temporarily until the button is pressed again. If a process is paused, the button caption PAUSE
is replaced by CONTINUE, indicating that a second click on the button will continue the current process. Pausing a current
process will increase the execution speed of other programs currently running on your computer. Clicking the SUPPRESS OUTPUT
button suppresses printing of output in the {\em output window}. The button caption changes to SHOW OUTPUT to indicate that an
additional click on the button will cause the program to print the output again. Suppressing the output increases the execution
speed of {\em BayesX} and saves memory. Note, that you can store your output in a log-file even if printing of the output is
suppressed (see \autoref{logfile}).

\subsection{Priority menu}
\label{prioritymenu} \index{Priority menu}

When running extensive computations, it may be desirable to reduce the priority of BayesX since otherwise all further programs
may be executed very slowly. The priority menu allows you to change the priority of your computations from within BayesX.
Usually there should be no need to increase the priority (although it is possible). To pause the current computations use the
PAUSE button.

\section{General usage of BayesX}
\label{generalusage}

\subsection{Creating objects}
\label{createobject} \index{Objects} \index{Objects!Create}

{\em BayesX} is implemented in an object oriented way, although the object oriented concept does not go too far, i.e.
inheritance or other concepts of object oriented programming languages such as S or C++ are not supported. As a consequence,
the first thing to do during a session, is to create some objects. Currently, eight different object types are available: {\em
dataset objects}, {\em bayesreg objects}, {\em mcmcreg objects}, {\em remlreg objects}, {\em stepwisereg objects}, {\em map objects}, {\em dag objects} and {\em graph objects}.

{\em Dataset objects} are used to store, handle, and manipulate data sets, see \autoref{datasetobj} for details. {\em Map
objects} are used to handle geographical information and are covered in more detail in \autoref{map}. The main purpose of {\em
map objects} is to serve as auxiliary objects for regression objects when estimating spatial
effects. {\em Graph objects} are used to visualize data (e.g. to create scatterplots or to color geographical maps according to
some numerical characteristics), see \autoref{graphobj} for details.

The most important object types are {\em bayesreg objects}, {\em mcmcreg objects}, {\em remlreg objects} and {\em stepwisereg objects}. These objects are used to estimate Bayesian semiparametric regression models based on the different inferential approaches implemented in {\em BayesX} (see \autoref{bayesreg} for {\em bayesreg objects}, \autoref{remlreg} for {\em remlreg objects}, \autoref{stepwisereg} for {\em stepwisereg objects} and \autoref{mcmcreg} for {\em mcmcreg objects}. {\em Dag objects} are used to estimate Gaussian or non-Gaussian DAGs (direct
acyclic graphs) based on reversible jump MCMC simulation techniques (see \autoref{dag} for details).

The syntax for creating a new object is:

#># {\em objecttype objectname}

To create for example a {\em dataset object} with name #mydata#, simply type:

#> dataset mydata#

Note that some restrictions are imposed on the names of objects, i.e. not all object names are allowed. For example, object
names have to begin with an uppercase or lowercase letter rather than a number. Section \ref{varnames} discusses valid variable
names but the same rules apply also to object names.

\subsection{Applying methods to previously defined objects}

When an object has been created successfully, you can apply methods to that particular object. For instance, {\em dataset
objects} may be used to read data stored in an ASCII file using method #infile#, to create new variables using method
#generate#, to modify existing variables using method #replace# and so on. The syntax for applying methods to the objects is
similar for all methods and independent of the particular object type. The general syntax is: \index{General syntax}
\index{Syntax}

#># {\em objectname.methodname} [{\em model}] [#weight# {\em varname}] [#if# {\em boolean expression}] [, {\em options}] \\
\hspace*{4.8cm} [#using# {\em usingtext}]

\autoref{syntaxtable} explains the syntax parts in more detail.


\begin{table}[ht]
 \centering
\begin{tabular}{|l|l|}
\hline
Syntax part & Description \\
\hline
{\em objectname} & the name of the object to apply the method to \\
{\em methodname} & the name of the method \\
{\em model} & a model specification (for example a regression model) \\
{\em #weight# varname} & specifies {\em varname} as weight variable \\
#if# {\em boolean expression} & indicates that the method should be applied only if a \\
& certain condition holds \\
, {\em options} & define (or modify) options for the method \\
#using# {\em usingtext} & indicates that another object or file is required to \\
& apply the particular method \\
\hline
\end{tabular}
{\em \caption{\label{syntaxtable}Parts of the general BayesX
syntax.}}
\end{table}

Note that $[\dots]$ indicates that this part of the syntax is
optional and may be omitted. Moreover for most methods only some
of the syntax parts above will be meaningful. The specification of
invalid syntax parts is not allowed and will cause an error
message.

We illustrate the concept with some simple methods of {\em dataset
objects}. Suppose that a {\em dataset object} with name #mydata#
has already been created and that some variables should be
created. First of all, we have to tell {\em BayesX} how many
observations we want to create. This can be done with the
 #set obs# command, see also \autoref{setobs}. For example

#> mydata.set obs = 1000#

indicates that the data set #mydata# should have 1000
observations. In this case, the {\em methodname} is #set# and the
{\em model} is #obs =# #1000#. Since no other syntax parts (for
example #if# statements) are meaningful for this method, they are
not allowed. For instance, specifying an additional weight
variable #x# by typing

#> mydata.set obs = 1000 weight x#

will cause the error message:

#ERROR: weight statement not allowed#

In a second step we can now create a new variable #X#, say, that
contains Gaussian (pseudo) random numbers with mean 2 and standard
deviation 0.5:

#> mydata.generate X = 2+0.5*normal()#

Here, #generate# is the {\em methodname} and #X = 2+0.5*normal()#
is the {\em model}. In this case the {\em model} consists of the
specification of the new variable name, followed by the equal sign
'#=#' and a mathematical expression for the new variable. Similar
as for the #set obs# command other syntax parts are not meaningful
and therefore not allowed. If the negative values of #X# should be
replaced with the constant 0, this can be achieved using the
#replace# command:

#> mydata.replace X = 0 if X < 0#

Obviously, the #if# statement is meaningful and is therefore
allowed, but not required.

\section{Description of data set examples}
\label{datadescription} \index{Data set examples}

This section describes three data sets used to illustrate many of
the features of {\em BayesX} in the following chapters as well as
in the tutorial manual. All data sets are stored columnwise in
plain ASCII-format. The first row of each data set contains the
variable names separated by blanks. Subsequent rows contain the
observations, one observation per row.

\subsection{Rents for flats}
\label{rentdata} \index{Rents for flats} \index{Data set
examples!Rents for flats}

According to the German rental law, owners of apartments or flats
can base an increase in the amount that they charge for rent on
'average rents' for flats comparable in type, size, equipment,
quality and location in a community. To provide information about
these 'average rents', most of the larger cities publish 'rental
guides', which can be based on regression analyses with rent as
the dependent variable. The file #rent94.raw# (stored in the
#examples# directory) is a subsample of data collected in 1994 for
the Munich rental guide. The variable of primary interest is the
monthly rent per square meter in German Marks. Covariates
characterizing the flat were constructed from almost 200 variables
out of a questionnaire answered by tenants of flats. The present
data set contains a small subset of these variables that are
sufficient for demonstration purposes (see \autoref{rentdatavar}).

In addition to the data set, the #examples# directory contains a
map of Munich in the file #munich.bnd#. This map will be useful
for visualizing effects of the location #L#. See \autoref{map} for
a description on how to incorporate geographical maps into {\em
BayesX}.

\begin{table}

\centering
\begin{tabular}{|l|l|}
\hline
{\bf Variable} & {\bf Description} \\
\hline
R & monthly rent per square meter in German marks \\
$F$ & floor space in square meters \\
$A$ & year of construction \\
$L$ & location of the building in subquarters \\
 \hline
\end{tabular}
{\em \caption{\label{rentdatavar}Variables of the rent data set.}}
\end{table}


\subsection{Credit scoring}
\label{creditdata} \index{Credit scoring} \index{Data set
examples!Credit scoring}

The aim of credit scoring is to model and / or predict the probability that a client with certain covariates ('risk factors')
will not pay back his credit. The data set contained in the file #credit.raw# consists of 1000 consumer credits from a bank in
southern Germany. The response variable is 'creditability' in dichotomous form ($y=0$ for creditworthy, $y=1$ for not
creditworthy). In addition, 20 covariates that are assumed to influence creditability were collected. The present data set
(stored in the #examples# directory) contains a subset of these covariates that proved to be the main influential variables on
the response variable, see \citeasnoun[Ch.~2.1]{FahTut01}. \autoref{creditdatavar} gives a description of the variables of the
data set. Usually a binary logit model is applied to estimate the effect of the covariates on the probability of being not
creditworthy. As in the case of the rents for flats example, this data set is used to demonstrate the usage of certain features
of {\em BayesX}, see primarily \autoref{creditanalyse} for a Bayesian regression analysis of the data set.

\begin{table}[ht]

\begin{tabular}{|l|l|}
\hline
{\bf Variable} & {\bf Description} \\
\hline
$y$ & creditability, dichotomous with $y=0$ for creditworthy, $y=1$ for \\
    & not creditworthy \\
$account$ & running account, trichotomous with categories "no
running account" \\& ($=1$),
    "good running account"
($=2$),  "medium running account" \\&("less than 200 DM") ($=3$)  \\
$duration$ & duration of credit in months, continuous \\
$amount$ & amount of credit in 1000 DM, continuous \\
$payment$ & payment of previous credits, dichotomous with categories "good" ($=1$), \\ & "bad" ($=2$)  \\
$intuse$ & intended use, dichotomous with categories "private" ($=1$) or \\ & "professional" ($=2$)  \\
$marstat$ & marital status, with categories "married" ($=1$) and "living alone" ($=2$). \\
\hline
\end{tabular}
{\em \caption{\label{creditdatavar}Variables of the credit scoring
data set.}}
\end{table}

\subsection{Childhood undernutrition in Zambia}
\label{zambia} \index{Childhood undernutrition} \index{Data set
examples!Childhood undernutrition}

Acute and chronic undernutrition is considered to be one of the
worst health problems in developing countries. Undernutrition
among children is usually determined by assessing the
anthropometric status of the child relative to a reference
standard. In our example undernutrition is measured through
stunting (insufficient height for age), indicating chronic
undernutrition. Stunting for child $i$ is determined using the
Z-score
\[Z_i = \frac{AI_i-MAI}{\sigma}\]
where $AI$ refers to the child`s anthropometric indicator (height
at a certain age in our example), MAI refers to the median of the
reference population and $\sigma$ refers to the standard deviation
of the reference population.

The data set #zambia.raw# contains the (standardized) Z-score for
4847 children together with several covariates that are supposed
to influence undernutrition (e.g. the body mass index of the
mother, the age of the child, and the district the mother lives
in). \autoref{zambiavar} gives more information on the covariates
in the data set.

This data set is used in the tutorial manual.

\begin{table}
\begin{center}
\begin{tabular}{|l|l|}
 \hline
 {\bf Variable} & {\bf Description}\\
 \hline
 $hazstd$ & standardized Z-score for stunting\\
 $bmi$ & body mass index of the mother\\
 $agc$ & age of the child\\
 $district$ & district where the mother lives\\
 $rcw$ & mother`s employment status with categories "working" (= 1) and "not working" \\
 & (= $-1$)\\
 $edu1$ & mother`s educational status with categories "complete primary but incomplete\\
 $edu2$ & secondary" ($edu1=1$), "complete secondary or higher" ($edu2=1$) and\\
 & "no education or incomplete primary" ($edu1=edu2=-1$)\\
 $tpr$ & locality of the domicile with categories "urban" (= 1) and "rural" (= $-1$)\\
 $sex$ & gender of the child with categories "male" (= 1) and
 "female" (= $-1$)\\
 \hline
\end{tabular}
{\em\caption{Variables in the undernutrition data set.
\label{zambiavar}}}
\end{center}
\end{table}
